# Visual-Graph RAG Configuration with Visual Embeddings
project:
  name: "DeepLightRAG"
  version: "2.0.0"

# Vision-OCR Settings with Visual Embedding Support
ocr:
  model_name: "mlx-community/DeepSeek-OCR-4bit"
  quantization: "4bit"  
  resolution: "base"
  
  # NEW: Visual Embedding Configuration
  enable_visual_embeddings: true
  embedding_compression: "pca"      # pca, quantize, sparse, none
  target_embedding_dim: 256         # Compressed from 768 dimensions  
  resolution_configs:
    tiny:
      size: [512, 512]
      tokens: 64
    small:
      size: [640, 640]
      tokens: 100
    base:
      size: [1024, 1024]
      tokens: 256
    large:
      size: [1280, 1280]
      tokens: 400
  batch_size: 2  # Pages per batch
  max_pages_parallel: 4


# NER Settings - Using DeBERTa/BERT (NO LLM)
ner:
  primary_model: "gliner"  # gliner, spacy, transformers
  gliner:
    model_name: "urchade/gliner_large-v2.1"
    confidence_threshold: 0.4
    batch_size: 8
  enhanced_pipeline:
    enable_visual_grounding: true
    enable_cross_region_coreference: true
    confidence_threshold: 0.3

# Relation Extraction Settings - Using DeBERTa (NO LLM)  
relation_extraction:
  primary_model: "deberta"  # deberta, opennre, patterns
  deberta:
    model_name: "microsoft/deberta-v3-large"
    confidence_threshold: 0.5
    max_length: 512
    device: "auto"
  datasets: ["ACE05", "TACRED"]  # Training datasets for relation types

# Graph Construction
graph:
  # Visual-Spatial Layer
  visual_spatial:
    edge_types:
      - "adjacent"
      - "reading_order"
      - "semantic"
      - "hierarchical"
    block_types:
      - "header"
      - "paragraph"
      - "table"
      - "figure"
      - "caption"
      - "list"
      - "formula"

  # Entity-Relationship Layer
  entity_relationship:
    entity_types:
      - "person"
      - "organization"
      - "location"
      - "date"
      - "money"
      - "product"
      - "concept"
    max_entities_per_page: 50
    min_entity_confidence: 0.7

# Adaptive Retrieval
retrieval:
  query_levels:
    level_1:  # Simple Factual
      name: "simple"
      max_tokens: 2000
      max_nodes: 5
      strategy: "entity_lookup"
    level_2:  # Complex Reasoning
      name: "complex"
      max_tokens: 6000
      max_nodes: 20
      strategy: "hybrid"
      hop_distance: 2
    level_3:  # Multi-Document
      name: "multi_doc"
      max_tokens: 10000
      max_nodes: 50
      strategy: "hierarchical"
    level_4:  # Visual-Semantic
      name: "visual"
      max_tokens: 12000
      max_nodes: 30
      strategy: "visual_fusion"

  # Path Compression
  path_compression:
    enabled: true
    max_path_length: 5
    compression_ratio: 0.6

# Vector Index
vector_index:
  embedding_model: "sentence-transformers/all-MiniLM-L6-v2"
  dimension: 384
  index_type: "IVFFlat"
  nlist: 100
  nprobe: 10

# Storage
storage:
  base_dir: "./deep_light_rag_data"
  graph_dir: "graphs"
  index_dir: "indices"
  cache_dir: "cache"

# Performance
performance:
  use_cache: true
  cache_ttl: 3600  # seconds
  parallel_processing: true
  max_workers: 4
